# 가스 경영 관리 2026 릴리즈 노트

**릴리즈 일자**: 2026년 2월 8일  
**버전**: 3.0.999  
**대상**: 실무 담당자 / QA 테스트팀

---

## 📋 주요 변경 사항

### 1. UI/UX 현대화 ✨
**변경 내용**:
- 앱 타이틀 변경: "가스 경영 관리 2025" → **"가스 경영 관리 2026"**
- 로그인 화면 모던 디자인 적용
  - 다크 네이비 그라데이션 헤더/푸터
  - 카드 스타일 입력 필드
  - 블루 그라데이션 로그인 버튼
- 메인 화면 개선
  - 메뉴 아이콘 크기 확대 (90px)
  - CSS Grid 레이아웃 적용
  - 검색 영역 카드 스타일
  - 통일된 다크 테마
- 저작권 표시: 2026년으로 업데이트

**테스트 항목**:
- [ ] 로그인 화면 UI 정상 표시 확인
- [ ] 메인 화면 메뉴 아이콘 크기 및 배치 확인
- [ ] 다양한 기기(iPhone, Android)에서 화면 정상 표시
- [ ] 다크모드 지원 확인

---

### 2. Docker 배포 환경 개선 🐳
**변경 내용**:
- Docker Compose에 Redis 서비스 추가 (`redis:7-alpine`)
- Redis 세션 관리 지원 (기존 HTTP 세션 + Redis sessionToken 병행)
- 컨테이너 환경에서 DB 설정 경로 자동 감지
- 환경변수 기반 Redis 호스트 설정 (로컬: `localhost`, Docker: `redis`)

**테스트 항목**:
- [ ] Docker 환경에서 로그인 성공 확인
- [ ] 로그인 후 메뉴 진입 시 사용자 정보 정상 로드
- [ ] CID 주문내역, 판매현황, 미수현황, 수금현황, 검침현황 메뉴 진입 테스트
- [ ] 서버 재시작 후 세션 유지 확인
- [ ] 다중 사용자 동시 접속 테스트

**배포 방법**:
```bash
# 리모트 서버에서
git clone -b feature/dynamic-db-config https://github.com/joatech1111/gas_manangement_fullstack_2026.git
cd gas_manangement_fullstack_2026
mvn clean package -DskipTests
docker compose up -d --build
```

**접속 URL**:
- 로컬: `http://localhost:9093/kkkkk_m_war/`
- 리모트: `http://gas.joaoffice.com:14007/kkkkk_m_war/`

---

### 3. 동적 DB 설정 및 멀티 테넌트 개선 🔧 **[중요]**

---
# ⚠️ 핵심 아키텍처 변경 사항
---

## 📌 변경 내용

### 🔴 **기존 방식**
> 업체별로 개별 XML 설정 파일 필요  
> (예: `192.168.100.128.xml`, `192.168.100.129.xml` 등)

### 🟢 **신규 방식** 
> ## `default_gasmax_app.xml` **하나만 사용**  
> ## `AppUser` 스키마(테이블) 정보 기반으로 **동적 생성**

#### 📋 상세 내용:
- ### ✅ `AppUser` 객체에 DB 접속 정보 저장
  - IP, Port, DB명, 사용자명, 비밀번호
  
- ### ✅ 로그인 시 iBatis SqlMapClient를 **메모리에서 동적 생성**
  
- ### ✅ 업체별 XML 파일 중복 설정 **완전 제거**
  
- ### ✅ 신규 업체 추가 시 XML 파일 생성 불필요
  - ## 👉 DB에 `AppUser` 레코드만 추가하면 **자동 연결**

---

**장점**:
- 업체 추가/변경 시 서버 재배포 불필요
- XML 파일 관리 부담 제거
- DB 정보 변경 시 `AppUser` 테이블만 수정
- 동적 멀티 테넌트 지원 강화

**테스트 항목** ⚠️ **[필수]**:
- [ ] 기존 업체 로그인 정상 동작 확인 (기존 XML 파일 없이 동작)
- [ ] 신규 업체 추가 테스트 (DB에 `AppUser` 추가 후 즉시 로그인 가능)
- [ ] 업체별 DB 접속 정상 동작 (멀티 테넌트)
- [ ] 고객 검색 기능 정상 동작
- [ ] 판매/수금/검침 데이터 조회 정상 동작
- [ ] 다중 업체 동시 접속 테스트 (세션 격리 확인)
- [ ] DB 접속 정보 변경 시 재로그인으로 즉시 반영 확인

**⚠️ 중요 공지**:
> 이 변경사항은 **핵심 아키텍처 변경**입니다.  
> 반드시 **충분한 테스트 완료 후** 운영 서버에 배포해야 합니다.  
> 테스트 환경에서 모든 업체별 로그인 및 데이터 조회를 검증한 후, 운영 배포를 진행하시기 바랍니다.

---

### 4. 백엔드 안정성 개선 🔧
**변경 내용**:
- XML 파싱 오류 수정 (JSP 응답 앞 공백 제거)
- 오래된 `.class` 파일 제거 (Maven 빌드 충돌 해결)
- DB 로그인 시 비밀번호 전달 로직 수정
- AJAX 타임아웃 60초 → 120초로 증가

**테스트 항목**:
- [ ] 네트워크 지연 환경에서 타임아웃 에러 미발생 확인
- [ ] JSP 응답 XML 파싱 정상 동작

---

## 🧪 필수 테스트 시나리오

### 시나리오 1: 로그인 및 메인 화면
1. 앱 실행
2. 업체 선택 (hpSeq 있는 경우)
3. 아이디/비밀번호 입력 후 로그인
4. 메인 화면 메뉴 아이콘 정상 표시 확인
5. 상단 업체명/DB명 표시 확인

### 시나리오 2: 메뉴 진입 및 데이터 조회
1. 메인 화면에서 "CID 주문내역" 아이콘 클릭
2. 검색 조건 (날짜, 사원) 정상 표시 확인
3. "조회" 버튼 클릭
4. 데이터 목록 정상 표시 확인
5. 상세 화면 진입 테스트

### 시나리오 3: 다른 메뉴 테스트
- 판매현황
- 미수현황
- 수금현황
- 검침현황

각 메뉴에서:
- [ ] 검색 조건 정상 표시
- [ ] 데이터 조회 정상 동작
- [ ] 페이징 정상 동작
- [ ] 상세/수정/삭제 기능 정상 동작

### 시나리오 4: 동적 DB 설정 테스트 ⚠️ **[필수]**
**목적**: 기존 XML 파일 없이 `AppUser` 기반 동적 DB 연결 검증

1. **기존 업체 로그인 테스트**
   - 기존에 사용하던 업체 계정으로 로그인
   - 로그인 성공 확인
   - 메뉴 진입 및 데이터 조회 정상 동작 확인
   - 서버 로그에서 "Dynamic XML generation" 메시지 확인

2. **신규 업체 추가 테스트** (가능한 경우)
   - DB에 신규 `AppUser` 레코드 추가 (DB 접속 정보 포함)
   - XML 파일 생성 없이 즉시 로그인 시도
   - 로그인 성공 및 데이터 조회 확인

3. **다중 업체 동시 접속 테스트**
   - 2개 이상의 서로 다른 업체 계정으로 동시 로그인
   - 각 세션이 올바른 DB에 접속하는지 확인
   - 데이터 조회 시 업체별 데이터 격리 확인

4. **DB 접속 정보 변경 테스트**
   - `AppUser` 테이블에서 DB 접속 정보 변경 (예: 포트 변경)
   - 재로그인 시 변경된 정보로 접속 확인

### 시나리오 5: 세션 유지 테스트
1. 로그인 후 앱 백그라운드 전환
2. 5분 후 앱 다시 활성화
3. 세션 유지 확인 (재로그인 불필요)
4. 메뉴 진입 시 사용자 정보 정상 로드

---

## 🐛 알려진 이슈

**없음** - 현재 버전에서 확인된 크리티컬 이슈 없음

---

## 📱 APK 빌드 정보

**파일명**: `app-release.apk`  
**빌드 위치**: `front_gas4management/android/app/build/outputs/apk/release/`  
**서버 URL**: `http://gas.joaoffice.com:14007/kkkkk_m_war/`  
**앱 ID**: `com.joainfo.gas_management_2026`  
**버전**: 3.0.999

---

## 📞 문의 및 이슈 보고

**Linear 이슈**: [JOA-529](https://linear.app/joatech2025/issue/JOA-529)  
**GitHub**: https://github.com/joatech1111/gas_manangement_fullstack_2026  
**브랜치**: `feature/dynamic-db-config`

---

## ✅ 체크리스트 (테스트 완료 후 체크)

### 기능 테스트
- [ ] 로그인 정상 동작
- [ ] 메인 화면 UI 정상 표시
- [ ] 모든 메뉴 진입 가능
- [ ] 데이터 조회/수정/삭제 정상 동작
- [ ] 세션 유지 확인

### 동적 DB 설정 테스트 ⚠️ **[필수]**
- [ ] 기존 업체 로그인 정상 동작 (XML 파일 없이)
- [ ] 신규 업체 추가 후 즉시 로그인 가능
- [ ] 다중 업체 동시 접속 시 세션 격리 확인
- [ ] 업체별 데이터 정상 조회 (다른 업체 데이터 미노출)
- [ ] DB 접속 정보 변경 시 재로그인으로 반영 확인

### 환경 테스트
- [ ] Docker 환경 정상 동작
- [ ] 리모트 서버 배포 정상
- [ ] iOS 앱 정상 동작
- [ ] Android 앱 정상 동작

### 성능 테스트
- [ ] 로그인 응답 속도 (3초 이내)
- [ ] 메뉴 진입 속도 (2초 이내)
- [ ] 데이터 조회 속도 (5초 이내)
- [ ] 네트워크 지연 시 타임아웃 처리

---

## 📋 배포 승인 프로세스

### 1단계: 테스트 환경 검증
- [ ] 모든 체크리스트 항목 완료
- [ ] 동적 DB 설정 테스트 **필수 완료**
- [ ] 크리티컬 이슈 없음 확인

### 2단계: 테스트 완료 승인
**테스트 담당자**: _______________  
**테스트 완료 일시**: _______________  
**테스트 결과**: [ ] 통과 / [ ] 실패  
**비고**: _______________________________________

### 3단계: 운영 배포 승인
**배포 승인자**: _______________  
**승인 일시**: _______________  
**배포 예정 일시**: _______________

### 4단계: 운영 배포 완료
**배포 실행자**: _______________  
**배포 완료 일시**: _______________  
**배포 결과**: [ ] 성공 / [ ] 실패  
**비고**: _______________________________________

---

## ⚠️ 배포 전 최종 확인사항

> **중요**: 이 릴리즈는 **동적 DB 설정**이라는 핵심 아키텍처 변경을 포함합니다.  
> 반드시 아래 항목을 확인한 후 운영 배포를 진행하시기 바랍니다.

1. [ ] 테스트 환경에서 **모든 업체** 로그인 테스트 완료
2. [ ] 기존 XML 파일 없이 정상 동작 확인
3. [ ] 다중 업체 동시 접속 시 데이터 격리 확인
4. [ ] 백업 계획 수립 (롤백 가능 여부 확인)
5. [ ] 운영 DB `AppUser` 테이블 데이터 검증 완료
6. [ ] 배포 후 모니터링 계획 수립

**테스트 완료 후 정상 동작이 확인되면 운영 서버에 배포를 진행합니다.**
