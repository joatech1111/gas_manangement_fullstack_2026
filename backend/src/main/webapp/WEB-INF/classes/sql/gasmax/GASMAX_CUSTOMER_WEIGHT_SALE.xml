<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap 
       PUBLIC 
             "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
              "http://ibatis.apache.org/dtd/sql-map-2.dtd"
 >
 
 <sqlMap>

     <select id="GASMAX.CustomerWeightSale.Select" resultClass="java.util.HashMap">
		SELECT
			  AREA_CODE   AS areaCode         
			, CU_CODE     AS customerCode     
			, PA_TYPE     AS saleType         
			, ''     AS saleDate 
			, ''     AS sequenceNumber
			, JP_CODE     AS itemCode         
			, JP_NAME     AS itemName         
			, SORT        AS saleDisplayOrder 
			, REPLACE(CONVERT(VARCHAR(15), ISNULL(JP_SORT, 0),1),'.00','')     AS itemDisplayOrder 
			, REPLACE(CAST(ISNULL(JP_QTY,0) AS CHAR(15))  ,'.00','')           AS saleQuantity
			, REPLACE(CAST(ISNULL(JP_REQTY,0) AS CHAR(15))  ,'.00','')         AS withdrawQuantity
			, REPLACE(CONVERT(VARCHAR(15), ISNULL(Kum_Sup, 0),1),'.000000','')     AS supplyAmount 
			, REPLACE(CONVERT(VARCHAR(15), ISNULL(Kum_Vat, 0),1),'.0','')     AS taxAmount        
			, REPLACE(CONVERT(VARCHAR(15), ISNULL(Kum_SUM, 0),1),'.0','')     AS sumAmount       
		FROM $catalogName$.dbo.fn_BOOK_JR_SUM('$areaCode$','$customerCode$','$startDate$','$endDate$')
		WHERE 1=1 
	</select>
	
	<parameterMap id="GASMAX.CustomerWeightSale.Insert.ParameterValue" class="java.util.HashMap">
		<parameter property="areaCode"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="customerCode"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="saleType"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="saleDate"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="customerName"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="userName"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="itemCode"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="itemName"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="itemSpec"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="saleQuantity"    javaType="java.lang.Integer" jdbcType="INTEGER" mode="IN" />
		<parameter property="withdrawQuantity"    javaType="java.lang.Integer" jdbcType="INTEGER" mode="IN" />
		<parameter property="salePrice"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="priceType"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="vatType"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="saleAmount"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="taxAmount"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="totalAmount"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="discountAmount"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="collectAmount"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="unpaidAmount"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="employeeCode"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="employeeName"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="remark"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="collectType"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="registerDate"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="userId"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="outputMessage"       javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT" />
	</parameterMap>
     
	<resultMap id="GASMAX.CustomerWeightSale.Insert.ReturnValue" class="java.util.HashMap">
		<result property="outputMessage" column="@po_ERROR_CODE" jdbcType="VARCHAR"/>
	</resultMap>

     <procedure id="GASMAX.CustomerWeightSale.Insert" resultMap="GASMAX.CustomerWeightSale.Insert.ReturnValue" parameterMap="GASMAX.CustomerWeightSale.Insert.ParameterValue">
	  <![CDATA[
	  {
		   CALL $catalogName$.dbo.sp_JRSALE (
				?,
				?,
				'I',
				?,
				?,
				'',
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				'',
				'',
				?,
				?,
				?,
				0,
				?,
				?,
				?,
				'SALE',
				0,
				? 
			)
		}
	   ]]>
	 </procedure>
	
	<parameterMap id="GASMAX.CustomerWeightSaleLPG.Insert.ParameterValue" class="java.util.HashMap">
		<parameter property="areaCode"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="customerCode"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="saleType"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="saleDate"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="customerName"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="userName"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="itemCode"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="itemName"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="itemSpec"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="saleQuantity"    javaType="java.lang.Integer" jdbcType="INTEGER" mode="IN" />
		<parameter property="withdrawQuantity"    javaType="java.lang.Integer" jdbcType="INTEGER" mode="IN" />
		<parameter property="salePrice"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="priceType"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="vatType"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="saleAmount"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="taxAmount"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="totalAmount"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="discountAmount"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="collectAmount"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="unpaidAmount"    javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="employeeCode"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="employeeName"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="remark"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="collectType"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="registerDate"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="userId"   javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="outputMessage"       javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT" />
	</parameterMap>
     
	<resultMap id="GASMAX.CustomerWeightSaleLPG.Insert.ReturnValue" class="java.util.HashMap">
		<result property="outputMessage" column="@po_ERROR_CODE" jdbcType="VARCHAR"/>
	</resultMap>

     <procedure id="GASMAX.CustomerWeightSaleLPG.Insert" resultMap="GASMAX.CustomerWeightSaleLPG.Insert.ReturnValue" parameterMap="GASMAX.CustomerWeightSaleLPG.Insert.ParameterValue">
	  <![CDATA[
	  {
		   CALL $catalogName$.dbo.sp_JRSALE_LPG (
				?,
				?,
				'I',
				?,
				?,
				'',
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				'',
				'',
				?,
				?,
				?,
				0,
				?,
				?,
				?,
				'SALE',
				0,
				? 
			)
		}
	   ]]>
	 </procedure>

     <select id="GASMAX.CustomerWeightSale.Select.Remark" resultClass="java.util.HashMap">
		SELECT PJ_CU_Site AS remark
		  FROM $catalogName$.dbo.JRSALE 
		WHERE AREA_CODE = '$areaCode$'
		  AND PJ_CU_CODE = '$customerCode$'
		  AND PJ_GU = '0'
		  AND PJ_DATE >= '$saleDate$'
		GROUP BY PJ_CU_Site
	</select>
		
	<parameterMap id="GASMAX.CustomerWeightSaleHPG.Delete.ParameterValue" class="java.util.HashMap">
	    <parameter property="areaCode"            javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="customerCode"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="saleType"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="saleDate"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="sequenceNumber"    javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="transactionDate"    javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="userId"    javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="outputMessage"       javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT" />
	</parameterMap>

     
	<resultMap id="GASMAX.CustomerWeightSaleHPG.Delete.ReturnValue" class="java.util.HashMap">
		<result property="outputMessage" column="@po_ERROR_CODE" jdbcType="VARCHAR"/>
	</resultMap>

     <procedure id="GASMAX.CustomerWeightSaleHPG.Delete" resultMap="GASMAX.CustomerWeightSaleHPG.Delete.ReturnValue" parameterMap="GASMAX.CustomerWeightSaleHPG.Delete.ParameterValue">
	  <![CDATA[
		   execute $catalogName$.dbo.sp_JRSALE 
				@pi_AREA_CODE      =?,
				@pi_CU_CODE        =?,
				@pi_PJ_DIV         ='D',
				@pi_SALE_TYPE        =?,
				@pi_PJ_DATE        =?,
				@pi_PJ_SNO         =?,
				@pi_PJ_Date_Time         =?,
				@pi_PJ_APP_User         =?,
				@po_ERROR_CODE     =?
	   ]]>
	 </procedure>
	 
	<parameterMap id="GASMAX.CustomerWeightSaleLPG.Delete.ParameterValue" class="java.util.HashMap">
	    <parameter property="areaCode"            javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="customerCode"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="saleType"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="saleDate"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="sequenceNumber"    javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="transactionDate"    javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="userId"    javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="outputMessage"       javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT" />
	</parameterMap>
     
	<resultMap id="GASMAX.CustomerWeightSaleLPG.Delete.ReturnValue" class="java.util.HashMap">
		<result property="outputMessage" column="@po_ERROR_CODE" jdbcType="VARCHAR"/>
	</resultMap>

     <procedure id="GASMAX.CustomerWeightSaleLPG.Delete" resultMap="GASMAX.CustomerWeightSaleLPG.Delete.ReturnValue" parameterMap="GASMAX.CustomerWeightSaleLPG.Delete.ParameterValue">
	  <![CDATA[
		   execute $catalogName$.dbo.sp_JRSALE_LPG 
				@pi_AREA_CODE      =?,
				@pi_CU_CODE        =?,
				@pi_PJ_DIV         ='D',
				@pi_SALE_TYPE        =?,
				@pi_PJ_DATE        =?,
				@pi_PJ_SNO         =?,
				@pi_PJ_Date_Time         =?,
				@pi_PJ_APP_User         =?,
				@po_ERROR_CODE     =?
	   ]]>
	 </procedure>
     
</sqlMap>