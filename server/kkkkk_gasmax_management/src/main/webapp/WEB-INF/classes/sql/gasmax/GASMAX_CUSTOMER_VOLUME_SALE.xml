<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap 
       PUBLIC 
             "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
              "http://ibatis.apache.org/dtd/sql-map-2.dtd"
 >
 
 <sqlMap>

     <select id="GASMAX.CustomerVolumeSale.Select" resultClass="java.util.HashMap">
		SELECT
			  AREA_CODE  AS areaCode
			, PC_CU_CODE AS customerCode
			, PC_Date    AS saleDate
			, PC_SNO     AS sequenceNumber
			, PC_JP_Code AS itemCode
			, PC_JP_Name AS itemName
			, REPLACE(CONVERT(VARCHAR(15), ISNULL(PC_QTY, 0)),'.00','')     AS saleQuantity
			, REPLACE(CONVERT(VARCHAR(15), ISNULL(PC_REQTY, 0)),'.00','')   AS withrawQuantity
			, REPLACE(CONVERT(VARCHAR(15), ISNULL(PC_JP_Kg, 0)),'.00','')   AS supplyQuantity
			, PC_SW_CODE AS employeeCode
			, PC_SW_Name AS employeeName
			, PC_TS_SNO AS equipmentInOutSequenceNumber
		FROM $catalogName$.dbo.fn_BOOK_CJ_GONG('$areaCode$','$customerCode$','$startDate$','$endDate$')
		WHERE 1=1
		ORDER BY AREA_CODE, PC_Date, PC_CU_CODE, PC_SNO
	</select>
	
     <parameterMap id="GASMAX.CustomerVolumeSale.Insert.ParameterValue" class="java.util.HashMap">
		<parameter property="areaCode"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="customerCode"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="saleDate"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="buildingName"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="itemCode"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="itemName"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="itemCapacity"            javaType="java.lang.Integer" jdbcType="INTEGER" mode="IN" />
		<parameter property="salePrice"             javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="saleQuantity"            javaType="java.lang.Integer" jdbcType="INTEGER" mode="IN" />
		<parameter property="withdrawQuantity"            javaType="java.lang.Integer" jdbcType="INTEGER" mode="IN" />
		<parameter property="saleAmount"             javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="employeeCode"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="employeeName"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="cubicPrice"             javaType="java.lang.Float" jdbcType="FLOAT" mode="IN" />
		<parameter property="readMeterQuantity"            javaType="java.lang.Integer" jdbcType="INTEGER" mode="IN" />
		<parameter property="remainQuantity"            javaType="java.lang.Integer" jdbcType="INTEGER" mode="IN" />
		<parameter property="remark"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="registerDate"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="userId"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="outputMessage"       javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT" />
	</parameterMap>

	<resultMap id="GASMAX.CustomerVolumeSale.Insert.ReturnValue" class="java.util.HashMap">
		<result property="outputMessage" column="@po_ERROR_CODE" jdbcType="VARCHAR"/>
	</resultMap>

     <procedure id="GASMAX.CustomerVolumeSale.Insert" resultMap="GASMAX.CustomerVolumeSale.Insert.ReturnValue" parameterMap="GASMAX.CustomerVolumeSale.Insert.ParameterValue">
	  <![CDATA[
	  {
		   CALL $catalogName$.dbo.sp_CJSALE (
				?,
				?,
				'I',
				?,
				'',
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				'',
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				?,
				? 
			)
		}
	   ]]>
	 </procedure>
	 	
	<parameterMap id="GASMAX.CustomerVolumeSale.Delete.ParameterValue" class="java.util.HashMap">
	    <parameter property="areaCode"            javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="customerCode"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="saleDate"        javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="sequenceNumber"    javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="transactionDate"    javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="userId"    javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
	    <parameter property="outputMessage"       javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT" />
	</parameterMap>

	<resultMap id="GASMAX.CustomerVolumeSale.Delete.ReturnValue" class="java.util.HashMap">
		<result property="outputMessage" column="@po_ERROR_CODE" jdbcType="VARCHAR"/>
	</resultMap>

     <procedure id="GASMAX.CustomerVolumeSale.Delete" resultMap="GASMAX.CustomerVolumeSale.Delete.ReturnValue" parameterMap="GASMAX.CustomerVolumeSale.Delete.ParameterValue">
	  <![CDATA[
		   execute $catalogName$.dbo.sp_CJSALE 
				@pi_AREA_CODE      =?,
				@pi_CU_CODE        =?,
				@pi_PC_DIV         ='D',
				@pi_PC_DATE        =?,
				@pi_PC_SNO         =?,
				@pi_PC_Date_Time         =?,
				@pi_PC_APP_User          =?,
				@po_ERROR_CODE     =?
			
	   ]]>
	 </procedure>
</sqlMap>